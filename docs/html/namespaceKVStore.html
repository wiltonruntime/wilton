<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>wilton.js: KVStore Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">wilton.js
   &#160;<span id="projectnumber">v202002231</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Packages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="namespacemembers.html"><span>Package&#160;Functions</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">KVStore Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><b>wilton/KVStore</b> <br/>
 Key-value store.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac427698a360bb0d556310d8a94151e5b"><td class="memItemLeft" align="right" valign="top">Boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceKVStore.html#ac427698a360bb0d556310d8a94151e5b">append</a> (String key, Array values, Function|Undefined callback)</td></tr>
<tr class="memdesc:ac427698a360bb0d556310d8a94151e5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append values to the list for the specified key.  <a href="#ac427698a360bb0d556310d8a94151e5b"></a><br/></td></tr>
<tr class="memitem:a09ed68bace6817b95bf5cc6edaf4402f"><td class="memItemLeft" align="right" valign="top">Number&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceKVStore.html#a09ed68bace6817b95bf5cc6edaf4402f">clear</a> (Function|Undefined callback)</td></tr>
<tr class="memdesc:a09ed68bace6817b95bf5cc6edaf4402f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete all stored entries.  <a href="#a09ed68bace6817b95bf5cc6edaf4402f"></a><br/></td></tr>
<tr class="memitem:a6e44a11a597f37996ac4b7ec6f8c7ebf"><td class="memItemLeft" align="right" valign="top">Number&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceKVStore.html#a6e44a11a597f37996ac4b7ec6f8c7ebf">destroy</a> (Function|Undefined callback)</td></tr>
<tr class="memdesc:a6e44a11a597f37996ac4b7ec6f8c7ebf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate native resources used for this store.  <a href="#a6e44a11a597f37996ac4b7ec6f8c7ebf"></a><br/></td></tr>
<tr class="memitem:af50998bebadc8afe905274e381ca3de2"><td class="memItemLeft" align="right" valign="top">Object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceKVStore.html#af50998bebadc8afe905274e381ca3de2">entries</a> (Function|Undefined callback)</td></tr>
<tr class="memdesc:af50998bebadc8afe905274e381ca3de2"><td class="mdescLeft">&#160;</td><td class="mdescRight">All the entries from this store.  <a href="#af50998bebadc8afe905274e381ca3de2"></a><br/></td></tr>
<tr class="memitem:ae8f89c9ff75fbbf6381ecd49c21059d4"><td class="memItemLeft" align="right" valign="top">Any&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceKVStore.html#ae8f89c9ff75fbbf6381ecd49c21059d4">get</a> (String key, Function|Undefined callback)</td></tr>
<tr class="memdesc:ae8f89c9ff75fbbf6381ecd49c21059d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an element from the store.  <a href="#ae8f89c9ff75fbbf6381ecd49c21059d4"></a><br/></td></tr>
<tr class="memitem:af8e5d31f8d66ca5dbdbc67ffcf2b98b3"><td class="memItemLeft" align="right" valign="top">Object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceKVStore.html#af8e5d31f8d66ca5dbdbc67ffcf2b98b3">getBatch</a> (Array keyList, Function|Undefined callback)</td></tr>
<tr class="memdesc:af8e5d31f8d66ca5dbdbc67ffcf2b98b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get multiple elements from the store.  <a href="#af8e5d31f8d66ca5dbdbc67ffcf2b98b3"></a><br/></td></tr>
<tr class="memitem:ac99872302a01770751708a69eb68d42f"><td class="memItemLeft" align="right" valign="top">Array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceKVStore.html#ac99872302a01770751708a69eb68d42f">keys</a> (Function|Undefined callback)</td></tr>
<tr class="memdesc:ac99872302a01770751708a69eb68d42f"><td class="mdescLeft">&#160;</td><td class="mdescRight">All the keys from this store.  <a href="#ac99872302a01770751708a69eb68d42f"></a><br/></td></tr>
<tr class="memitem:a0c919efde91eb07d387a1463e6c0bbb1"><td class="memItemLeft" align="right" valign="top">Object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceKVStore.html#a0c919efde91eb07d387a1463e6c0bbb1">KVStore</a> (String|Undefined|Number filePathOrHandle, Function|Undefined callback)</td></tr>
<tr class="memdesc:a0c919efde91eb07d387a1463e6c0bbb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create <code><a class="el" href="namespaceKVStore.html" title="wilton/KVStore   Key-value store.">KVStore</a></code> instance.  <a href="#a0c919efde91eb07d387a1463e6c0bbb1"></a><br/></td></tr>
<tr class="memitem:a3d1999ddd46c81c09a6cacd0cc307eab"><td class="memItemLeft" align="right" valign="top">Number&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceKVStore.html#a3d1999ddd46c81c09a6cacd0cc307eab">persist</a> (Function|Undefined callback)</td></tr>
<tr class="memdesc:a3d1999ddd46c81c09a6cacd0cc307eab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save all contents to file.  <a href="#a3d1999ddd46c81c09a6cacd0cc307eab"></a><br/></td></tr>
<tr class="memitem:a109d726328f6c61de79e9e9af6baeec5"><td class="memItemLeft" align="right" valign="top">Any&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceKVStore.html#a109d726328f6c61de79e9e9af6baeec5">put</a> (String key, Object|Array value, Function|Undefined callback)</td></tr>
<tr class="memdesc:a109d726328f6c61de79e9e9af6baeec5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put an element to the store.  <a href="#a109d726328f6c61de79e9e9af6baeec5"></a><br/></td></tr>
<tr class="memitem:a651179a5be59497cccb45817246c8f60"><td class="memItemLeft" align="right" valign="top">Object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceKVStore.html#a651179a5be59497cccb45817246c8f60">putBatch</a> (Object obj, Function|Undefined callback)</td></tr>
<tr class="memdesc:a651179a5be59497cccb45817246c8f60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put multiple elements to the store.  <a href="#a651179a5be59497cccb45817246c8f60"></a><br/></td></tr>
<tr class="memitem:a1bf7b2799945bd5bc9bdd98e755560d4"><td class="memItemLeft" align="right" valign="top">Boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceKVStore.html#a1bf7b2799945bd5bc9bdd98e755560d4">remove</a> (String key, Function|Undefined callback)</td></tr>
<tr class="memdesc:a1bf7b2799945bd5bc9bdd98e755560d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove an element from the store.  <a href="#a1bf7b2799945bd5bc9bdd98e755560d4"></a><br/></td></tr>
<tr class="memitem:aa8d43dfb6f352da9acd8b9ed95476218"><td class="memItemLeft" align="right" valign="top">Array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceKVStore.html#aa8d43dfb6f352da9acd8b9ed95476218">removeBatch</a> (Array keyList, Function|Undefined callback)</td></tr>
<tr class="memdesc:aa8d43dfb6f352da9acd8b9ed95476218"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove multiple elements from the store.  <a href="#aa8d43dfb6f352da9acd8b9ed95476218"></a><br/></td></tr>
<tr class="memitem:a589790bbd3a36cc7639a99323ccb7d06"><td class="memItemLeft" align="right" valign="top">Number&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceKVStore.html#a589790bbd3a36cc7639a99323ccb7d06">size</a> (Function|Undefined callback)</td></tr>
<tr class="memdesc:a589790bbd3a36cc7639a99323ccb7d06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of entries in this store.  <a href="#a589790bbd3a36cc7639a99323ccb7d06"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Key-value store (linked hash multimap) that lives in shared memory and can be safely accessed from multiple threads.</p>
<p>Can be optionally created over the persistent file on disk. In that case file contents are read on store creation and saved on store destroy (for example, on application shutdown) or on a <code><a class="el" href="namespaceKVStore.html#a3d1999ddd46c81c09a6cacd0cc307eab" title="Save all contents to file.">persist()</a></code> call.</p>
<p>Usage example:</p>
<div class="fragment"><div class="line"><span class="comment">// create transient (non-persistent store)</span></div>
<div class="line">var st1 = <span class="keyword">new</span> <a class="code" href="namespaceKVStore.html#a0c919efde91eb07d387a1463e6c0bbb1" title="Create KVStore instance.">KVStore</a>();</div>
<div class="line"></div>
<div class="line"><span class="comment">// create persistent store over a file</span></div>
<div class="line">var st = <span class="keyword">new</span> <a class="code" href="namespaceKVStore.html#a0c919efde91eb07d387a1463e6c0bbb1" title="Create KVStore instance.">KVStore</a>(<span class="stringliteral">&quot;path/to/my.json&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// put entries into store</span></div>
<div class="line">st.put(<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span>);</div>
<div class="line">st.put(<span class="stringliteral">&quot;baz&quot;</span>: [42, 43]);</div>
<div class="line"></div>
<div class="line"><span class="comment">// append values to existing entry</span></div>
<div class="line"><span class="comment">// existing value must be an array</span></div>
<div class="line">st.append(<span class="stringliteral">&quot;baz&quot;</span>, [44, 45, 46];</div>
<div class="line"></div>
<div class="line"><span class="comment">// remove entry</span></div>
<div class="line">st.remove(<span class="stringliteral">&quot;foo&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// share store with other threads</span></div>
<div class="line">var chan = <span class="keyword">new</span> <a class="code" href="namespaceChannel.html#a31e912ae66edd06a075e1fd28d27a943" title="Create Channel instance.">Channel</a>(<span class="stringliteral">&quot;my/channel/name&quot;</span>, 1);</div>
<div class="line">chan.send({</div>
<div class="line">    kvstoreHandle: st.handle</div>
<div class="line">});</div>
<div class="line"></div>
<div class="line"><span class="comment">// access store from other thread</span></div>
<div class="line">var channel = <a class="code" href="namespaceChannel.html#a31e912ae66edd06a075e1fd28d27a943" title="Create Channel instance.">Channel</a>.lookup(<span class="stringliteral">&quot;my/channel/name&quot;</span>);</div>
<div class="line">var handle = channel.peek().kvstoreHandle;</div>
<div class="line">var st = <span class="keyword">new</span> <a class="code" href="namespaceKVStore.html#a0c919efde91eb07d387a1463e6c0bbb1" title="Create KVStore instance.">KVStore</a>(handle);</div>
<div class="line"></div>
<div class="line"><span class="comment">// persist store to file</span></div>
<div class="line">st.persist();</div>
<div class="line"></div>
<div class="line"><span class="comment">// destroy store, persisting it to file</span></div>
<div class="line"><span class="comment">// and de-allocating native resources</span></div>
<div class="line">st.destroy()</div>
</div><!-- fragment --> </div><h2>Function Documentation</h2>
<a class="anchor" id="ac427698a360bb0d556310d8a94151e5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Boolean KVStore::append </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Array&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Function|Undefined&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extends the array, stored as a value for the specified key, with the specified list of values (appending each value to the end of the array).</p>
<p>If key doesn't exist in the store - it is created with the specified values list.</p>
<p>If key exists in the store, its value must be an <code>Array</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td><code>String</code> key of the entry to append to, its already inserted value must be a JSON <code>Array</code> </td></tr>
    <tr><td class="paramname">values</td><td><code>Array</code> list of values to append to the existing list already stored for the specified key </td></tr>
    <tr><td class="paramname">callback</td><td><code>Function|Undefined</code> callback to receive result or error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>Boolean</code> <code>true</code>, if the key existed and its value (JSON <code>Array</code>) was actually appended to; false if key didn't exist and was created with the specified <code>values</code> list </dd></dl>

</div>
</div>
<a class="anchor" id="a09ed68bace6817b95bf5cc6edaf4402f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Number KVStore::clear </td>
          <td>(</td>
          <td class="paramtype">Function|Undefined&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes all elements from the store and (if this store was constructed over a file) overwrites the persistent file with empty contents.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td><code>Function|Undefined</code> callback to receive result or error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>Number</code> number of entries removed </dd></dl>

</div>
</div>
<a class="anchor" id="a6e44a11a597f37996ac4b7ec6f8c7ebf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Number KVStore::destroy </td>
          <td>(</td>
          <td class="paramtype">Function|Undefined&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Saves store contents to a file (if this store was constructed over a file) and destroys the store de-allocating the native resources associates with it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td><code>Function|Undefined</code> callback to receive result or error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>Number</code> number of elements in store before destroy </dd></dl>

</div>
</div>
<a class="anchor" id="af50998bebadc8afe905274e381ca3de2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Object KVStore::entries </td>
          <td>(</td>
          <td class="paramtype">Function|Undefined&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an <code>Object</code> containing all the entries from the store.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td><code>Function|Undefined</code> callback to receive result or error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>Object</code> all the contents of the store </dd></dl>

</div>
</div>
<a class="anchor" id="ae8f89c9ff75fbbf6381ecd49c21059d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Any KVStore::get </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Function|Undefined&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves an element from the store with the specified key. Returns <code>null</code> if specified key is not found.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td><code>String</code> key to retrieve </td></tr>
    <tr><td class="paramname">callback</td><td><code>Function|Undefined</code> callback to receive result or error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>Any</code> stored value (<code>Object</code> or <code>Array</code>) or <code>null</code> if no key was found </dd></dl>

</div>
</div>
<a class="anchor" id="af8e5d31f8d66ca5dbdbc67ffcf2b98b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Object KVStore::getBatch </td>
          <td>(</td>
          <td class="paramtype">Array&#160;</td>
          <td class="paramname"><em>keyList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Function|Undefined&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves multiple elements from the store using specified <code>keyList</code>. Returning object contains only the keys (and retrieved values) that were found in the store. Keys, that were not found, are not included into result.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyList</td><td><code>Array</code> list of keys to retrieve </td></tr>
    <tr><td class="paramname">callback</td><td><code>Function|Undefined</code> callback to receive result or error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>Object</code> objects with each property containing a key from the specified list and a retrieved value for that key - <code>Object</code> or <code>Array</code> </dd></dl>

</div>
</div>
<a class="anchor" id="ac99872302a01770751708a69eb68d42f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Array KVStore::keys </td>
          <td>(</td>
          <td class="paramtype">Function|Undefined&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an <code>Array</code> containing all the keys from this store. Keys are returned in the insertion order.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td><code>Function|Undefined</code> callback to receive result or error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>Array</code> list of all the keys in the store </dd></dl>

</div>
</div>
<a class="anchor" id="a0c919efde91eb07d387a1463e6c0bbb1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Object KVStore::KVStore </td>
          <td>(</td>
          <td class="paramtype">String|Undefined|Number&#160;</td>
          <td class="paramname"><em>filePathOrHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Function|Undefined&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a store instance allocating the native resources for it. If path to file is specified, entries from this file will be be loaded into store and this file will be used to persist the contents of the store.</p>
<p>If empty (or <code>null</code>) file path specified - store will be memory-only without dist persistence.</p>
<p>If handle value is specified - uses existing store with this handle.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filePathOrHandle</td><td><code>String|Undefined|Number</code> this argument represents either a path to the file (<code>String</code>) where to persist store contents; or a handle (<code>Number</code>) of the existing <code><a class="el" href="namespaceKVStore.html" title="wilton/KVStore   Key-value store.">KVStore</a></code> object created in another thread; if argument is <code>null</code> ot not specified persistence is not used </td></tr>
    <tr><td class="paramname">callback</td><td><code>Function|Undefined</code> callback to receive result or error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>Object</code> <code><a class="el" href="namespaceKVStore.html" title="wilton/KVStore   Key-value store.">KVStore</a></code> instance </dd></dl>

</div>
</div>
<a class="anchor" id="a3d1999ddd46c81c09a6cacd0cc307eab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Number KVStore::persist </td>
          <td>(</td>
          <td class="paramtype">Function|Undefined&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Saves all the contents of the store to the file on disk. Throws an error, if no file path was specified on store creation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td><code>Function|Undefined</code> callback to receive result or error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>Number</code> number of elements saved to JSON file </dd></dl>

</div>
</div>
<a class="anchor" id="a109d726328f6c61de79e9e9af6baeec5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Any KVStore::put </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Object|Array&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Function|Undefined&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Inserts the specified value into the store using the specified key. If key already exist in the store, its value it overwritten.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td><code>String</code> key to insert </td></tr>
    <tr><td class="paramname">value</td><td><code>Object|Array</code> value to insert </td></tr>
    <tr><td class="paramname">callback</td><td><code>Function|Undefined</code> callback to receive result or error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>Any</code> value (<code>Object</code> or <code>Array</code>) that was stored with the specified key or <code>null</code> if no existing key was found </dd></dl>

</div>
</div>
<a class="anchor" id="a651179a5be59497cccb45817246c8f60"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Object KVStore::putBatch </td>
          <td>(</td>
          <td class="paramtype">Object&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Function|Undefined&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Inserts all properties from the specified <code>Object</code> into the store. If the store already contains some of the inserted keys, their values are overwritten.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td><code>Object</code> object containing the set of elements to insert, each property value must be either <code>Object</code> or <code>Array</code> </td></tr>
    <tr><td class="paramname">callback</td><td><code>Function|Undefined</code> callback to receive result or error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>Object</code> object containing entries with the matching keys that were overwritten by the insertion; entries that were not overwritten are not included </dd></dl>

</div>
</div>
<a class="anchor" id="a1bf7b2799945bd5bc9bdd98e755560d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Boolean KVStore::remove </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Function|Undefined&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes the element with the specified key from the store.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td><code>String</code> key to remove </td></tr>
    <tr><td class="paramname">callback</td><td><code>Function|Undefined</code> callback to receive result or error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>Boolean</code> <code>true</code> if the specified key was found (and the corresponding entry was removed), <code>false</code> otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="aa8d43dfb6f352da9acd8b9ed95476218"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Array KVStore::removeBatch </td>
          <td>(</td>
          <td class="paramtype">Array&#160;</td>
          <td class="paramname"><em>keyList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Function|Undefined&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove the elemtns with the specified keys from the store.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyList</td><td><code>Array</code> list of keys to remove </td></tr>
    <tr><td class="paramname">callback</td><td><code>Function|Undefined</code> callback to receive result or error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>Array</code> list of the keys, that were found in the store and removed </dd></dl>

</div>
</div>
<a class="anchor" id="a589790bbd3a36cc7639a99323ccb7d06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Number KVStore::size </td>
          <td>(</td>
          <td class="paramtype">Function|Undefined&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the number of entries in this store.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td><code>Function|Undefined</code> callback to receive result or error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>Number</code> number of entries in the store </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Feb 23 2020 23:12:24 for wilton.js by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
